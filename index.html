<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>역사의 기로에서: 1910-1948</title>
    <style>
        :root {
            --bg-color: #121212;
            --container-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --accent-color: #76c7c0;
            --highlight-color: #ff6b6b;
            --btn-bg: #2d2d2d;
            --btn-hover: #3d3d3d;
            --border-radius: 8px;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
        }

        #game-container {
            width: 100%;
            max-width: 600px;
            background-color: var(--container-bg);
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border-radius: var(--border-radius);
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        header {
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        h1 {
            margin: 0 0 10px 0;
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        #status-bar {
            display: flex;
            justify-content: space-around;
            font-size: 0.9rem;
            background: #252525;
            padding: 8px;
            border-radius: var(--border-radius);
        }

        .stat-box span {
            font-weight: bold;
            display: block;
            font-size: 0.8rem;
            color: #888;
        }

        .stat-value {
            font-size: 1.1rem;
            color: #fff;
        }

        #timeline {
            text-align: center;
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        #scenario-area {
            flex-grow: 1;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        #scenario-text {
            font-size: 1.05rem;
            margin-bottom: 20px;
            white-space: pre-line;
        }

        .choice-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background-color: var(--btn-bg);
            color: var(--text-color);
            border: 1px solid #444;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .choice-btn:hover {
            background-color: var(--btn-hover);
            border-color: var(--accent-color);
        }

        /* Modal / Feedback Overlay */
        #feedback-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            box-sizing: border-box;
            border-radius: var(--border-radius);
            z-index: 10;
        }

        .feedback-content {
            background: #252525;
            padding: 20px;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--accent-color);
            max-height: 80%;
            overflow-y: auto;
        }

        .feedback-title {
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .feedback-text {
            font-size: 0.95rem;
            color: #ccc;
            margin-bottom: 20px;
        }

        .next-btn {
            background-color: var(--accent-color);
            color: #121212;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            float: right;
        }

        .next-btn:hover {
            background-color: #5ab1aa;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .highlight { color: var(--highlight-color); font-weight: bold; }
        .accent { color: var(--accent-color); font-weight: bold; }

        /* Ending Screen */
        #ending-screen {
            display: none;
            text-align: center;
        }
        #ending-title { font-size: 1.8rem; margin-bottom: 20px; color: var(--accent-color); }
        #ending-desc { margin-bottom: 30px; }
        #restart-btn {
            background-color: var(--highlight-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div id="game-container">
    <header>
        <h1>역사의 기로에서</h1>
        <div id="timeline">1910년</div>
        <div id="status-bar">
            <div class="stat-box">
                <span>체력 (생존)</span>
                <div class="stat-value" id="hp-val">100</div>
            </div>
            <div class="stat-box">
                <span>애국심 (의지)</span>
                <div class="stat-value" id="patriot-val">0</div>
            </div>
        </div>
    </header>

    <div id="scenario-area">
        <p id="scenario-text">로딩 중...</p>
        <div id="choices"></div>
    </div>

    <!-- Feedback Overlay -->
    <div id="feedback-overlay">
        <div class="feedback-content">
            <div class="feedback-title" id="fb-title">역사적 사실</div>
            <div class="feedback-text" id="fb-text">내용</div>
            <button class="next-btn" onclick="nextStage()">다음 시대로 &rarr;</button>
        </div>
    </div>

    <!-- Ending Screen -->
    <div id="ending-screen">
        <h2 id="ending-title">게임 종료</h2>
        <p id="ending-desc">결과 내용</p>
        <button id="restart-btn" onclick="location.reload()">다시 시작하기</button>
    </div>
</div>

<script>
    // 게임 상태 변수
    let currentStageIndex = 0;
    let hp = 100;
    let patriotism = 0;

    // PDF 자료에 기반한 시나리오 데이터
    const scenarios = [
        {
            year: "1910년 ~ 1912년",
            title: "무단 통치의 시작과 토지 조사",
            text: "한일병합조약 이후 일제는 헌병 경찰을 앞세운 '무단 통치'를 시작했습니다.\n관리와 교사는 제복을 입고 칼을 찼으며, 즉결 처분권이 시행되었습니다.\n\n1912년, 일제는 '근대적 토지 소유권 확립'을 명분으로 <span class='highlight'>토지조사사업</span>을 실시했습니다.\n기한 내에 신고하지 않으면 땅을 빼앗긴다고 합니다.\n당신은 조상 대대로 물려받은 땅을 가지고 있습니다. 어떻게 하시겠습니까?",
            choices: [
                {
                    text: "땅을 지키기 위해 기한 내에 신고한다.",
                    effect: { hp: 0, pat: 0 },
                    feedbackTitle: "토지조사사업 (1912~)",
                    feedback: "신고를 통해 소유권은 인정받았지만, 많은 농민들은 복잡한 절차와 무지로 땅을 잃었습니다.\n\n[학습 포인트]\n- 결과: 총독부 소유 토지 증가 → <span class='accent'>동양척식주식회사</span>로 불하\n- 영향: 지주의 소유권만 인정되고, 소작인의 경작권(도지권)은 부정되었습니다."
                },
                {
                    text: "일제의 정책에 반대하여 신고하지 않는다.",
                    effect: { hp: -20, pat: 10 },
                    feedbackTitle: "토지를 잃다",
                    feedback: "신고하지 않은 토지는 '주인 없는 땅'으로 간주되어 조선총독부에 몰수되었습니다.\n당신은 소작농으로 전락하여 힘겨운 삶을 살게 되었습니다.\n\n[학습 포인트]\n- 방식: 토지 소유자가 일정 기간 내 신고하는 '기한부 신고제'였습니다."
                }
            ]
        },
        {
            year: "1919년",
            title: "3.1 운동의 물결",
            text: "1910년대 무단 통치의 억압 속에서도, 윌슨의 민족자결주의와 고종의 장례일을 계기로 독립의 열망이 타올랐습니다.\n\n서울 탑골공원에서 시작된 만세 시위가 전국으로, 도시에서 농촌으로 확산되고 있습니다.\n친구들이 태극기를 건네며 함께 거리로 나가자고 합니다.",
            choices: [
                {
                    text: "태극기를 들고 '대한 독립 만세'를 외치며 나간다.",
                    effect: { hp: -30, pat: 30 },
                    feedbackTitle: "3.1 운동 (1919)",
                    feedback: "일제의 무자비한 폭력 진압(제암리 사건 등)으로 크게 다쳤지만, 당신의 용기는 역사를 바꿨습니다.\n\n[학습 포인트]\n- 의의: 최대 규모의 민족 운동, <span class='accent'>대한민국 임시정부</span> 수립의 계기.\n- 변화: 일제는 무단 통치에서 '문화 통치'로 통치 방식을 바꾸게 됩니다."
                },
                {
                    text: "무서워서 집 안에 숨어 상황을 지켜본다.",
                    effect: { hp: 0, pat: -10 },
                    feedbackTitle: "3.1 운동의 영향",
                    feedback: "시위에 참여하진 않았지만, 창밖으로 울려 퍼지는 함성에 마음이 뜨거워집니다.\n\n[학습 포인트]\n- 전개: 초기에는 비폭력 평화 시위였으나, 일제의 무력 탄압에 저항하며 점차 무력 저항으로 발전했습니다.\n- 계층: 학생, 시민 → 농민, 노동자로 참여 계층이 확대되었습니다."
                }
            ]
        },
        {
            year: "1920년대 중반",
            title: "문화 통치의 기만과 산미증식계획",
            text: "일제는 3.1운동 이후 '문화 통치'를 표방하며 헌병 경찰을 보통 경찰로 바꿨지만, 뒤로는 <span class='highlight'>치안유지법</span>을 제정해 독립운동가를 탄압하고 있습니다.\n\n한편, '산미증식계획'으로 쌀 생산량은 늘었지만, 일본으로 빠져나가는 양(반출량)이 더 많아 쌀이 부족합니다.\n조만식 선생이 평양에서 '내 살림 내 것으로'라며 <span class='accent'>물산장려운동</span>을 시작했다는 소식이 들립니다.",
            choices: [
                {
                    text: "비싸더라도 국산 토산품을 애용한다 (물산장려운동 참여)",
                    effect: { hp: -10, pat: 10 },
                    feedbackTitle: "물산장려운동",
                    feedback: "회사령 폐지와 관세 철폐 움직임에 대항해 시작되었습니다.\n하지만 물가 상승으로 인해 사회주의 계열로부터 '자본가만을 위한 운동'이라는 비판을 받기도 했습니다.\n\n[학습 포인트]\n- 구호: 조선 사람 조선 것으로, 우리 것으로 살자"
                },
                {
                    text: "당장 먹고 살기 힘드니 싼 일본 제품을 쓴다.",
                    effect: { hp: 10, pat: -5 },
                    feedbackTitle: "경제 수탈의 심화",
                    feedback: "생존을 위한 선택이었지만, 경제 예속은 심화되었습니다.\n\n[학습 포인트]\n- 산미증식계획 결과: 증산량보다 반출량이 많아 국내 식량 사정이 악화되었고, 증산 비용은 농민에게 전가되어 농민이 몰락했습니다."
                }
            ]
        },
        {
            year: "1926년 ~ 1929년",
            title: "학생들과 신간회",
            text: "1926년 순종의 장례식 날(6.10 만세운동), 그리고 1929년 광주에서 한일 학생 간의 충돌로 시작된 항일 운동이 전국으로 번졌습니다.\n\n국내에서는 민족주의 진영과 사회주의 진영이 연합하여 최대 규모의 합법적 항일 단체인 <span class='highlight'>신간회</span>(1927)가 결성되었습니다. 신간회 지회에서 당신에게 가입을 권유합니다.",
            choices: [
                {
                    text: "신간회에 가입하여 광주 학생 항일 운동 진상조사단 활동을 돕는다.",
                    effect: { hp: -10, pat: 20 },
                    feedbackTitle: "신간회와 광주 학생 항일 운동",
                    feedback: "신간회는 '광주 학생 항일 운동'에 진상 조사단을 파견하고 민중 대회를 계획하며 학생들을 지원했습니다.\n\n[학습 포인트]\n- 신간회: '비타협적 민족주의 + 사회주의'의 민족 유일당 운동.\n- 광주 학생 항일 운동: 3.1운동 이후 최대 규모의 항일 운동."
                },
                {
                    text: "정치적 활동은 위험하다. 야학에서 한글을 가르치며 문맹 퇴치에 힘쓴다.",
                    effect: { hp: 0, pat: 10 },
                    feedbackTitle: "문맹 퇴치 운동",
                    feedback: "조선일보의 '문자 보급 운동'이나 동아일보의 '브나로드 운동'에 동참하셨군요.\n\n[학습 포인트]\n- 1930년대 초반 언론사 주도로 '아는 것이 힘, 배워야 산다' 등의 구호를 내걸고 전개되었습니다."
                }
            ]
        },
        {
            year: "1930년대 초반",
            title: "국외 무장 투쟁",
            text: "만주에서는 일제의 침략이 본격화되자 한·중 연합 작전이 펼쳐지고 있습니다. \n김구 선생님은 임시정부의 침체를 극복하기 위해 <span class='accent'>한인애국단</span>을 조직했습니다.\n\n상해에서 윤봉길 의사가 거사를 준비 중입니다. 당신은 상해에 있는 교민입니다.",
            choices: [
                {
                    text: "윤봉길 의사의 훙커우 공원 거사를 돕는다.",
                    effect: { hp: -20, pat: 30 },
                    feedbackTitle: "한인애국단 (1931)",
                    feedback: "윤봉길 의사의 의거는 중국 국민당 정부가 대한민국 임시정부를 적극 지원하게 되는 결정적 계기가 되었습니다.\n\n[학습 포인트]\n- 이봉창: 도쿄에서 일왕 암살 시도.\n- 윤봉길: 상해 훙커우 공원 폭탄 투척."
                },
                {
                    text: "만주 북부로 이동하여 지청천 장군의 한국독립군에 합류한다.",
                    effect: { hp: -20, pat: 30 },
                    feedbackTitle: "한·중 연합 작전",
                    feedback: "한국독립군(북만주, 쌍성보/대전자령 전투)이나 조선혁명군(남만주, 영릉가/흥경성 전투)은 중국군과 연합하여 일본군을 격파했습니다.\n\n[학습 포인트]\n- 배경: 만주사변(1931) 이후 일제의 만주 침략."
                }
            ]
        },
        {
            year: "1930년대 후반 ~ 1940년대",
            title: "민족 말살 통치와 총동원",
            text: "중일전쟁(1937) 이후 일제는 침략 전쟁을 위해 조선을 병참 기지로 만들고 있습니다.\n'내선일체'를 강조하며 신사 참배와 궁성 요배를 강요하고, 심지어 우리의 이름마저 일본식으로 바꾸라(창씨개명)고 합니다.\n\n동사무소 직원이 찾아와 창씨개명 신고서를 내밀며 압박합니다.",
            choices: [
                {
                    text: "아이들의 학교 입학을 위해 어쩔 수 없이 창씨개명을 한다.",
                    effect: { hp: 10, pat: -20 },
                    feedbackTitle: "민족 말살 통치",
                    feedback: "많은 조선인이 차별과 불이익(입학 거부, 식량 배급 제외) 때문에 원치 않는 개명을 해야 했습니다.\n\n[학습 포인트]\n- 내용: 황국신민서사 암송, 우리말 사용 금지, 소학교를 '국민학교(황국신민의 학교)'로 개칭.\n- 국가총동원법: 인적(징용, 위안부), 물적(공출) 수탈 강화."
                },
                {
                    text: "내 성을 바꿀 순 없다. 끝까지 거부하고, 조선어학회 활동을 지원한다.",
                    effect: { hp: -30, pat: 30 },
                    feedbackTitle: "조선어학회 사건 (1942)",
                    feedback: "창씨개명을 거부하며 온갖 불이익을 당했습니다. 또한 한글 맞춤법을 제정하고 사전을 편찬하려던 조선어학회 회원들이 투옥되는 사건이 발생합니다.\n\n[학습 포인트]\n- 일제는 민족 문화를 말살하기 위해 역사 왜곡(식민사관)과 우리말 사용을 금지했습니다."
                }
            ]
        },
        {
            year: "1945년 8월 15일 이후",
            title: "광복, 그리고 분단",
            text: "드디어 광복을 맞이했습니다! 하지만 기쁨도 잠시, 38도선을 경계로 미군과 소련군이 들어왔습니다.\n모스크바 3국 외상 회의에서 <span class='highlight'>신탁 통치</span> 결정 소식이 전해지자 좌우익의 대립이 격해집니다.\n\n1948년 5월 10일, 남한만의 총선거가 결정되었습니다. 김구 선생님은 '38선을 베고 쓰러질지언정 단독 정부는 안 된다'며 남북 협상을 위해 평양으로 가셨습니다.",
            choices: [
                {
                    text: "현실적으로 가능한 지역(남한)에서라도 먼저 정부를 수립해야 한다. (5.10 총선거 투표)",
                    effect: { hp: 10, pat: 0 },
                    feedbackTitle: "대한민국 정부 수립 (1948)",
                    feedback: "5.10 총선거를 통해 제헌 국회가 구성되었고, 7월 17일 헌법 제정, 8월 15일 대한민국 정부가 수립되었습니다. 반면 제주도 4.3 사건 등 갈등도 있었습니다.\n\n[학습 포인트]\n- 초대 대통령: 이승만\n- 과제: 농지 개혁(유상매입 유상분배), 친일파 청산(반민특위 실패)."
                },
                {
                    text: "통일된 조국이 아니면 의미가 없다. 투표에 참여하지 않는다.",
                    effect: { hp: -10, pat: 20 },
                    feedbackTitle: "남북 협상과 분단",
                    feedback: "김구, 김규식 등은 남북 협상을 추진했으나 실패했습니다. 결국 한반도에는 두 개의 정부가 들어서게 되었습니다.\n\n[학습 포인트]\n- 유엔 소총회: '가능한 지역(남한)'에서의 총선거 결정.\n- 김구: <삼천만 동포에게 읍고함> 발표."
                }
            ]
        }
    ];

    // 게임 로직 함수들
    function updateStats(change) {
        hp += change.hp;
        patriotism += change.pat;

        if (hp > 100) hp = 100;
        if (hp < 0) hp = 0;

        document.getElementById('hp-val').innerText = hp;
        document.getElementById('patriot-val').innerText = patriotism;

        // 시각적 효과 (간단한 색상 변경)
        if(hp < 30) document.getElementById('hp-val').style.color = '#ff6b6b';
        else document.getElementById('hp-val').style.color = '#fff';
    }

    function renderStage() {
        if (currentStageIndex >= scenarios.length) {
            showEnding();
            return;
        }

        if (hp <= 0) {
            showEnding("dead");
            return;
        }

        const stage = scenarios[currentStageIndex];
        
        // UI 업데이트
        document.getElementById('timeline').innerText = stage.year;
        
        // 텍스트 타이핑 효과처럼 보이기 위해 내용을 교체
        const textElem = document.getElementById('scenario-text');
        textElem.innerHTML = `<strong style="font-size:1.2em; color:#76c7c0; display:block; margin-bottom:10px;">${stage.title}</strong>${stage.text}`;

        // 선택지 생성
        const choicesDiv = document.getElementById('choices');
        choicesDiv.innerHTML = '';

        stage.choices.forEach((choice, index) => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.innerText = choice.text;
            btn.onclick = () => handleChoice(choice);
            choicesDiv.appendChild(btn);
        });
    }

    function handleChoice(choice) {
        updateStats(choice.effect);

        // 피드백 팝업 표시
        const overlay = document.getElementById('feedback-overlay');
        document.getElementById('fb-title').innerText = choice.feedbackTitle;
        document.getElementById('fb-text').innerHTML = choice.feedback;
        overlay.style.display = 'flex';
    }

    function nextStage() {
        document.getElementById('feedback-overlay').style.display = 'none';
        currentStageIndex++;
        renderStage();
    }

    function showEnding(type) {
        document.getElementById('scenario-area').style.display = 'none';
        document.getElementById('ending-screen').style.display = 'block';
        const title = document.getElementById('ending-title');
        const desc = document.getElementById('ending-desc');

        if (type === "dead") {
            title.innerText = "비극적인 최후";
            desc.innerText = "격동의 역사 속에서 당신은 안타깝게 목숨을 잃었습니다.\n일제 강점기의 가혹한 현실은 수많은 이들의 희생을 강요했습니다.";
        } else {
            // 점수에 따른 엔딩 분기
            title.innerText = "새로운 나라의 아침";
            let content = "1948년, 대한민국 정부가 수립되었습니다.<br><br>";
            
            if (patriotism >= 80) {
                content += "당신은 <strong>독립유공자</strong>로서 헌신적인 삶을 살았습니다. 당신의 이름은 역사에 길이 남을 것입니다.";
            } else if (patriotism >= 40) {
                content += "당신은 격동의 시기를 묵묵히 견뎌낸 <strong>자랑스러운 시민</strong>입니다. 당신의 인내 덕분에 광복이 찾아왔습니다.";
            } else {
                content += "혼란스러운 시대 속에서 생존을 위해 타협할 수밖에 없었던 순간들이 있었습니다. 역사는 그것을 비극이라 부릅니다.";
            }
            
            content += "<br><br>최종 점수<br>생존: " + hp + " / 애국심: " + patriotism;
            desc.innerHTML = content;
        }
    }

    // 게임 시작
    window.onload = function() {
        renderStage();
    }
</script>

</body>
</html>